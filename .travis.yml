language: python

python:
  - "3.5"

cache: pip

before_install:
  - sudo apt-get -qq install ghostscript
  - sudo apt-get -qq install dvipng
  - sudo apt-get -qq install texlive-latex-extra
  - sudo apt-get -qq install texlive-fonts-recommended

addons:
  apt:
    sources:
      - r-packages-trusty
    packages:
      - r-base

install:
  - pip install -e .[rplot]

# following here: https://stackoverflow.com/a/35403128
before_script: # configure a headless display to test plot generation
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

script: 
  - pytest

branches:
  only:
    - master
